# Film! - –û–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ –≤ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ –≤ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –Ω–∞–¥–µ–∂–Ω—ã–º API.

## üåê –ó–∞–¥–µ–ø–ª–æ–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** [https://film-by-bagz.nomorepartiessbs.ru](https://film-by-bagz.nomorepartiessbs.ru)

**–ú–∞–∫–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞:** 
[![Figma](https://img.shields.io/badge/Figma%20-brightgreen)]([https://dimabagz.github.io/blog-customizer/](https://www.figma.com/design/82PqcEWXowbRAP7HDQfKH2/8-—Å–ø—Ä–∏–Ω—Ç.-Yandex--Film.-Film.-Film--?node-id=244-5&p=f&t=Qb2SIlmopOe6gxR7-0))



**–î–æ—Å—Ç—É–ø –∫ pgAdmin:**
```bash
URL: http://–≤–∞—à-–∞–¥—Ä–µ—Å—Å:8080 / (http://158.160.154.24:8080) - –ø–∞–Ω–µ–ª—å –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞
–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
Email: admin@–≤–∞—à-–¥–æ–º–µ–Ω.nomorepartiessbs.ru
–ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å
–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
```
**–í–æ–π–¥–∏—Ç–µ –≤ pgAdmin**
–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ "Servers" ‚Üí "Register" ‚Üí "Server...")
–ù–∞ –≤–∫–ª–∞–¥–∫–µ "General":
```bash
Name: Film Database
–ù–∞ –≤–∫–ª–∞–¥–∫–µ "Connection":
Host name/address: film_postgres_prod (–∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL)
Port: 5432
Maintenance database: film
Username: postgres
Password: postgres
```
**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ SSH —Ç—É–Ω–Ω–µ–ª—å (–µ—Å–ª–∏ –ø–æ—Ä—Ç 8080 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω):**
```bash
ssh -i ~/.ssh/ssh-key-–í–ê–®-–ö–ï–ô -L 8080:localhost:8080 –≤–∞—à-—é–∑–µ—Ä@1**.1**.1**.**
```
–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080 –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Secrets** (Settings ‚Üí Secrets and variables ‚Üí Actions):

   - `SERVER_HOST` - IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
   - `SERVER_USER` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - `SERVER_SSH_KEY` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á
   - `SERVER_PORT` - –ø–æ—Ä—Ç SSH (–æ–±—ã—á–Ω–æ 22)
   - `GITHUB_TOKEN` - —Ç–æ–∫–µ–Ω GitHub –¥–ª—è registry

2. **–ü–æ–ª—É—á–∏—Ç–µ –¥–æ–º–µ–Ω** –Ω–∞ [domain.nomoreparties.site](https://domain.nomoreparties.site)

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä**:

   ```bash
   git clone https://github.com/dimabagz/film-react-nest.git /opt/film-react-nest
   cd /opt/film-react-nest
   chmod +x tools/setup-server.sh
   ./tools/setup-server.sh
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL**:
   ```bash
   chmod +x tools/setup-ssl.sh
   ./tools/setup-ssl.sh your-domain.nomoreparties.site
   ```
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —É—Ç–∏–ª–∏—Ç—ã:** [tools/README.md](tools/README.md)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

- **Frontend** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º UI
- **Backend** - NestJS API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PostgreSQL
- **Server** - Nginx —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏–∫–∏ –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤
- –í—ã–±–æ—Ä —Å–µ–∞–Ω—Å–æ–≤ –∏ –º–µ—Å—Ç
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (NestJS)

- **Framework**: NestJS —Å TypeScript
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (–æ—Å–Ω–æ–≤–Ω–∞—è)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–≥–µ—Ä–æ–≤ (Dev, JSON, TSKV)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Unit –∏ E2E —Ç–µ—Å—Ç—ã —Å Jest
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger/OpenAPI

### Frontend (React)

- **Framework**: React 18 —Å TypeScript
- **–°–±–æ—Ä–∫–∞**: Vite
- **–°—Ç–∏–ª–∏**: SCSS –º–æ–¥—É–ª–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: Storybook –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Server (Nginx)

- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä**: Nginx
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã**: –†–∞–∑–¥–∞—á–∞ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- **–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ**: API –∑–∞–ø—Ä–æ—Å—ã –∫ backend
- **SSL**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS

### DevOps

- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker —Å multi-stage builds
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: Docker Compose
- **CI/CD**: GitHub Actions
- **–†–µ–µ—Å—Ç—Ä**: GitHub Container Registry (GHCR)
- **–î–µ–ø–ª–æ–π**: Yandex Cloud



 **–ó–∞–ø—É—Å–∫ —Å Docker Compose:**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.example .env

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d --build

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:
# - Frontend: http://localhost:80
# - Backend API: http://localhost:3000
# - pgAdmin: http://localhost:8080
```

**–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:**

```bash
# Backend
cd backend
npm install
npm run start:dev

# Frontend (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd frontend
npm install
npm run dev
```

## üîß –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –ª–æ–≥–≥–µ—Ä–æ–≤, –≤—ã–±–∏—Ä–∞–µ–º—ã—Ö —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `LOGGER_TYPE`:

### 1. DevLogger (dev)

- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –£–¥–æ–±–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 2. JsonLogger (json)

- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Ñ–æ—Ä–º–∞—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –í–∫–ª—é—á–∞–µ—Ç timestamp –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 3. TskvLogger (tskv)

- Tab-Separated Key-Value —Ñ–æ—Ä–º–∞—Ç
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞:

```bash
# –í –∫–æ—Ä–Ω–µ–≤–æ–º .env —Ñ–∞–π–ª–µ
LOGGER_TYPE=json  # –∏–ª–∏ dev, tskv
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
# Backend —Ç–µ—Å—Ç—ã
cd backend
npm test                    # Unit —Ç–µ—Å—Ç—ã
npm run test:cov           # –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm run test:e2e           # E2E —Ç–µ—Å—Ç—ã

# Frontend —Ç–µ—Å—Ç—ã
cd frontend
npm test                   # Unit —Ç–µ—Å—Ç—ã
npm run storybook          # Storybook
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:

- **–õ–æ–≥–≥–µ—Ä—ã**: –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ API
- **–°–µ—Ä–≤–∏—Å—ã**: –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: E2E —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
./tools/test-booking.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
./tools/test-content.sh
```

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤:

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
docker-compose build

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω –æ–±—Ä–∞–∑—ã
docker-compose -f docker-compose.prod.yml up -d
```

### –û–±—Ä–∞–∑—ã –≤ GitHub Container Registry:

- `ghcr.io/your-username/film-react-nest/backend:latest`
- `ghcr.io/your-username/film-react-nest/frontend:latest`
- `ghcr.io/your-username/film-react-nest/server:latest`

## üì¶ CI/CD Pipeline

### GitHub Actions Workflow:

1. **–¢—Ä–∏–≥–≥–µ—Ä**: Push –≤ main/master –≤–µ—Ç–∫—É
2. **–°–±–æ—Ä–∫–∞**: Multi-stage Docker builds
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
4. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è**: Push –≤ GHCR
5. **–î–µ–ø–ª–æ–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è CI/CD:

- `GITHUB_TOKEN` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è GitHub
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- `NODE_ENV` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (production/development)

### –ú–µ—Ç—Ä–∏–∫–∏:

- **API**: Swagger UI —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: pgAdmin —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: Docker stats

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- **CORS**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: DTO –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: –ó–∞–ø—É—Å–∫ –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# Backend
npm run start:dev          # –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run build              # –°–±–æ—Ä–∫–∞
npm run lint               # –õ–∏–Ω—Ç–∏–Ω–≥
npm run test               # –¢–µ—Å—Ç—ã

# Frontend
npm run dev                # –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run build              # –°–±–æ—Ä–∫–∞
npm run storybook          # Storybook
npm run lint               # –õ–∏–Ω—Ç–∏–Ω–≥
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Swagger UI:

```
http://localhost:3000/api/docs
```

Swagger UI –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- –ò–∑—É—á–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –í–∏–¥–µ—Ç—å —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (DTO)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js (–≤–µ—Ä—Å–∏—è 16 –∏–ª–∏ –≤—ã—à–µ)
- PostgreSQL (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ –æ–±–ª–∞–∫–µ)
- Docker –∏ Docker Compose

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run start:dev
```

### –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```bash
npm run build
npm run start:prod
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### Films Module (`src/films/`)

–û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å–º–∞–º–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Å–µ–∞–Ω—Å–æ–≤.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- **DTO –∫–ª–∞—Å—Å—ã** (`dto/films.dto.ts`) - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- **HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`films.controller.ts`) - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** (`films.service.ts`) - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å–º–∞–º–∏
- **–ú–æ–¥—É–ª—å** (`films.module.ts`) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è

#### Order Module (`src/order/`)

–ú–æ–¥—É–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- **DTO –∫–ª–∞—Å—Å—ã** (`dto/order.dto.ts`) - —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
- **HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`order.controller.ts`) - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞–∫–∞–∑–æ–≤
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** (`order.service.ts`) - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- **–ú–æ–¥—É–ª—å** (`order.module.ts`) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è

#### Static Module (`src/static/`)

–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, CSS, JS).

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`static.controller.ts`) - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º —Ñ–∞–π–ª–∞–º
- **–ú–æ–¥—É–ª—å** (`static.module.ts`) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### Repository Layer (`src/repository/`)

–°–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω Repository.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (`films.repository.interface.ts`) - –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **In-Memory —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (`films.in-memory.repository.ts`) - –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **PostgreSQL —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (`films.postgres.repository.ts`) - —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä** (`films.repository.provider.ts`) - –≤—ã–±–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏


### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`app.config.provider.ts`) - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å** (`app.module.ts`) - –∫–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞** (`main.ts`) - –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Repository Pattern

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Repository –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º:

- **`IFilmsRepository`** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **`FilmsInMemoryRepository`** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –ø–∞–º—è—Ç–∏ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- **`FilmsPostgresRepository`** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å PostgreSQL (TypeORM)
- **`FilmsRepositoryProvider`** - –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Ñ–∏–ª—å–º–æ–≤

* –í—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è DATABASE_DRIVER:
* - 'inmemory' ‚Üí —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –ø–∞–º—è—Ç–∏
* - 'postgres' ‚Üí PostgreSQL (TypeORM)

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `USE_IN_MEMORY_REPOSITORY`.

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å**: `api/afisha` (–∏—Å–∫–ª—é—á–µ–Ω–∏—è: `/`, `content/afisha/*`)
- **CORS**: –≤–∫–ª—é—á–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∏—Å–∫–ª—é—á–µ–Ω–∏–π**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ API
- **Swagger**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **DTO –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –º–µ—Å—Ç, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏**: –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ñ–∏–ª—å–º–∞—Ö –∏ —Å–µ–∞–Ω—Å–∞—Ö. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:

## üé¨ –§–∏–ª—å–º—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

1. **–°–æ–Ω –≤ –ª–µ—Ç–Ω–∏–π –¥–µ–Ω—å** (8.1) - –ê–º–µ–ª–∏—è –•—å—é–∑
2. **–ü–∞—Ä–∞–¥–æ–∫—Å –ù–µ–∫—Å—É—Å–∞** (9.5) - –û–ª–∏–≤–µ—Ä –ë–µ–Ω–Ω–µ—Ç
3. **–°—Ç—Ä–∞–∂–∏ –ì—Ä–∏–º—É–∞—Ä–∞** (8.9) - –õ–∏–ª–∞ –í–∞—Å–∫–µ—Å
4. **–ó–≤—ë–∑–¥–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ** (8.5) - –≠–ª–∏–∑–∞ –£–∏—Ç—Ç–∞–∫–µ—Ä
5. **–ù–µ–¥–æ—Å—Ç–∏–∂–∏–º–∞—è —É—Ç–æ–ø–∏—è** (9.0) - –•–∞—Ä—Ä–∏—Å–æ–Ω –†–∏–¥
6. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä—ã –æ–±—â–µ—Å—Ç–≤–∞** (2.9) - –ò—Ç–∞–Ω –†–∞–π—Ç

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bat-—Ñ–∞–π–ª–∞ (Windows)
```bash
cd backend
test/setup_database.bat
```
### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º (Windows)

```bash
cd backend
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL:
psql -h 127.0.0.1 -U postgres
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö film:
CREATE DATABASE film;
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è(–°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ–∞–Ω—Å–æ–≤):
set PGCLIENTENCODING=UTF8 && psql -U postgres -d film -f test/setup_database_utf8.sql
```
### –í–∞—Ä–∏–∞–Ω—Ç 4: –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
psql -U postgres -d film -f test/prac.init.sql

# 2. –í—Å—Ç–∞–≤–∫–∞ —Ñ–∏–ª—å–º–æ–≤
psql -U postgres -d film -f test/prac.films.sql

# 3. –í—Å—Ç–∞–≤–∫–∞ —Å–µ–∞–Ω—Å–æ–≤
psql -U postgres -d film -f test/prac.schedules.sql
```
## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Å—Ç**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –º–µ—Å—Ç–∞ –Ω–µ –∑–∞–Ω—è—Ç—ã –ø–µ—Ä–µ–¥ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–§–æ—Ä–º–∞—Ç –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç**: –ú–µ—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `${row}:${seat}`
- **DTO –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∏—Å–∫–ª—é—á–µ–Ω–∏–π**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ API

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **Repository Pattern**: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- **In-Memory —Ä–µ–∂–∏–º**: –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–∑–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤
